{% extends 'base/base_nav_simple_footer.html' %}
{% load static %}

{% block content %}

<div class="container container-rating">
  <h2 class="text-xs-center rating-title">¿Cómo te sentiste hoy?</h2>
  <div class="row emojis-container mt-2">
    <div class="col-xs-6 col-md-4 col-lg-3">
      <figure class="emoji-container emoji-lv-1">
        <img class="emoji" src="{% static 'images/Very_Angry_Emoji.png' %}" alt="Very_Angry_Emoji">
      </figure>
    </div>
    <div class="col-xs-6 col-md-4 col-lg-3">
      <figure class="emoji-container emoji-lv-2">
        <img class="emoji" src="{% static 'images/Very_sad_emoji_icon_png.png' %}" alt="Very_sad_emoji_icon_png">      
      </figure>
    </div>
    <div class="col-xs-6 col-md-4 col-lg-3">
      <figure class="emoji-container emoji-lv-3">
        <img class="emoji" src="{% static 'images/Smiling_Emoji_with_Smiling_Eyes.png' %}" alt="Smiling_Emoji_with_Smiling_Eyes">
      </figure>
    </div>
    <div class="col-xs-6 col-md-4 col-lg-3 ">
      <figure class="emoji-container emoji-lv-4">
        <img class="emoji" src="{% static 'images/Heart_Eyes_Emoji.png' %}" alt="Heart_Eyes_Emoji">
      </figure>
    </div>
  </div>
  <div class="rating-footer mt-2 mb-3">
    <h3 class="text-xs-center rating-footer-title"></h3>
    <div class="container">
      <div class="row">
      {% for element in elements %}
        <div class="col-xs-6 col-lg-4 mt-1">
          <button class="btn btn-lg btn-block btn-option" id="element-id-{{ element.id }}">
            <span>{{ element }}</span>
          </button>
        </div>
        {% endfor %}
      </div>
      <div class="row mt-3">
        <div class="col-xs-12">
          <button id="btn-send-score" class="btn btn-block btn-success">
            <span class="btn-text">Enviar</span>
            <span class="icon-container">
              <i class="material-icons">send</i>
            </span>
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

{% endblock %} 

{% block javascript %}

<script src="{% static 'js/Chart.bundle.min.js' %}" defer></script>
<script src="{% static 'js/papaparse.min.js' %}" defer></script>
<script src="{% static 'js/blob.js' %}" defer></script>
<script src="{% static 'js/fileSaver.min.js' %}" defer></script>

<script type="text/javascript" charset="utf-8" async>
$(function() {
  let active_buttons = [];

  $(this).on('click', '.emoji-container', function(event) {
    let emoji = $(this);
    emoji_level = emoji.attr('class').split(' ');
    // console.log(emoji);

    /**
     * Gets the emoji level
     */
    for (let i = 0; i < emoji_level.length; i++) {
      if (emoji_level[i].search('emoji-lv') >= 0) {
        emoji_level = emoji_level[i].split('-')[2];
        // emoji = emoji_level[i];
        // console.log(emoji_level);
      };
    };
    if (emoji_level == 1) {
      $('.rating-footer-title').text('¿Qué salió mal?');
      let buttons = $('.btn-option');

      buttons.each(function(index, el) {
        elemento = $(this);
        elemento.removeClass('btn-outline-2 btn-outline-3 btn-outline-4');
        elemento.addClass('btn-outline-1');
      });
    } else if (emoji_level == 2) {
      $('.rating-footer-title').text('¿Qué salió mal?');
      let buttons = $('.btn-option');

      buttons.each(function(index, el) {
        elemento = $(this);
        elemento.removeClass('btn-outline-1 btn-outline-3 btn-outline-4');
        elemento.addClass('btn-outline-2');
      });
    } else if (emoji_level == 3) {
      $('.rating-footer-title').text('¿Qué salió bien?');
      let buttons = $('.btn-option');

      buttons.each(function(index, el) {
        elemento = $(this);
        elemento.removeClass('btn-outline-1 btn-outline-2 btn-outline-4');
        elemento.addClass('btn-outline-3');
      });
    } else {
      $('.rating-footer-title').text('¿Qué salió bien?');
      let buttons = $('.btn-option');
      buttons.each(function(index, el) {
        elemento = $(this);
        elemento.removeClass('btn-outline-1 btn-outline-2 btn-outline-3');
        elemento.addClass('btn-outline-4')
      });
    }
    $('.rating-footer').show(300);
  });

});
</script>
{% endblock javascript %}